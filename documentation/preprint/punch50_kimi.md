# KCOR Cursor Punchlist – Accepted Kimi Feedback Only

This punchlist enumerates **all corrections and clarifications to implement**, including minor ones, based on the Kimi model feedback. Items are written to be **Cursor-executable**: each has *exact placement* and *drop‑in wording*. Suggestions that are strategic but intentionally **not adopted** (e.g., removing COVID applications) are **excluded**.

---

## A. METHODS — REQUIRED TECHNICAL CORRECTIONS

### A1. Bootstrap procedure clarification (CRITICAL)

**Location:** §2.9 *Uncertainty quantification*, subsection **2.9.1 Stratified bootstrap procedure**

**Problem addressed:** Potential misinterpretation that time bins are resampled independently, breaking the counting‑process structure.

#### Action A1.1 — Replace Step 1 text

**Replace the entire Step 1 bullet** with the following:

> **1. Resample cohorts using a block-preserving aggregated bootstrap.**  
> For each cohort and stratum, bootstrap replicates are generated by resampling **contiguous blocks of event-time bins** with replacement, preserving the internal temporal dependence of the counting process. Within each resampled block, deaths $d_d(t)$ and corresponding risk sets $N_d(t)$ are carried forward sequentially so that
> $$
> N_d(t)=N_d(0)-\sum_{s<t} d_d(s)
> $$
> holds identically within each replicate. This preserves the martingale covariance structure of the cumulative hazard estimator while operating on aggregated cohort–time data.

#### Action A1.2 — Add explicit non-independence statement

**Immediately after the numbered list in §2.9.1**, insert the following paragraph:

> Importantly, event-time bins are **not resampled independently**. Any bootstrap procedure that breaks the sequential dependence between $d_d(t)$ and $N_d(t)$ would underestimate uncertainty in cumulative hazards. The block-preserving aggregated bootstrap used here maintains the temporal structure required for valid uncertainty propagation in cumulative-hazard space.

---

### A2. Numerical safeguard for \(\hat\theta \to 0\)

**Location:** §2.6 *Normalization (depletion-neutralized cumulative hazards)*, subsection **2.6.1 Computational considerations**

#### Action A2 — Append numerical-stability paragraph

**Append the following paragraph to §2.6.1:**

> **Numerical stability at vanishing frailty variance.**  
> When the fitted frailty variance satisfies $\hat\theta_d < \varepsilon$ (with $\varepsilon$ set to a small numerical tolerance, e.g., $10^{-8}$), the gamma-frailty inversion in Eq. (\@eq:normalized-cumhazard) is evaluated in the $\theta \to 0$ limit, yielding
> $$
> \tilde H_{0,d}(t)=H_{\mathrm{obs},d}(t),
> $$
> which corresponds to the standard Nelson–Aalen cumulative hazard. This avoids numerical instability from evaluating $(\exp(\theta H)-1)/\theta$ near machine precision and reflects the fact that near-zero fitted frailty variance indicates negligible detectable depletion curvature.

---

### A3. Boundary case \(\theta=0\) noted explicitly

**Location:** §2.5 *Estimation during quiet periods*, immediately after Eq. (\@eq:nls-objective)

#### Action A3 — Insert boundary-condition sentence

Insert the following sentence **after Eq. (\@eq:nls-objective):**

> The boundary case $\theta_d=0$ is admissible; in this limit the model-implied cumulative hazard reduces to $H_d^{\mathrm{model}}(t)=k_d t$, and the normalization step leaves observed cumulative hazards unchanged.

---

## B. IDENTIFIABILITY — CLARIFICATIONS (NO CHANGE IN SCOPE)

### B1. Quiet-window identifiability limit (FUNDAMENTAL, NOT DIAGNOSTIC)

**Location:** §4.1 *Limits of attribution and non-identifiability*

#### Action B1 — Append explicit identifiability paragraph

**Append the following paragraph to §4.1:**

> **Identifiability limit within quiet windows.**  
> Even under ideal data quality, KCOR cannot distinguish between (i) high frailty variance with no treatment effect and (ii) low frailty variance with a constant proportional treatment effect that is active throughout the quiet window. In both cases, observed cumulative hazards exhibit similar curvature over the window, rendering $(k_d,\theta_d)$ and a time-invariant treatment multiplier not separately identifiable from minimal aggregated data. This is a structural identifiability limit rather than a modeling or diagnostic failure; KCOR addresses this by requiring prespecified quiet windows and by treating analyses that fail post-normalization diagnostics as not identified.

---

## C. POSITIONING VS. SHARED-FRAILTY COX (CLARIFICATION ONLY)

### C1. Explicit distinction from Cox + gamma frailty

**Location:** §2.11 *Relationship to Cox proportional hazards*, subsection **2.11 (main text)**

#### Action C1 — Insert clarifying paragraph before §2.11.1

Insert the following paragraph **immediately before the heading “2.11.1 Demonstration: Cox bias…”**:

> **Distinction from shared-frailty Cox models.**  
> Cox models with shared frailty incorporate unobserved heterogeneity as a random effect during partial-likelihood maximization, but continue to estimate an instantaneous hazard ratio conditional on survival. Frailty variance is treated as a nuisance parameter and depletion geometry is absorbed into the fitted hazard ratio trajectory. KCOR differs fundamentally: frailty variance is estimated explicitly from cumulative-hazard curvature during prespecified quiet periods and is then analytically inverted *prior* to comparison. The resulting estimand is a cumulative hazard contrast on a depletion-neutralized scale, rather than a conditional instantaneous hazard ratio. Consequently, even when shared-frailty Cox models reduce bias relative to standard Cox regression, they do not target the same estimand as KCOR and may still exhibit residual non-null behavior under selection-only regimes.

---

## D. NOTATIONAL / CITATION MICRO-FIXES

### D1. Cite discrete-hazard transform

**Location:** §2.3 *Hazard estimation and cumulative hazards in discrete time*, immediately after Eq. (\@eq:hazard-discrete)

#### Action D1 — Append citation sentence

Append the following sentence to the paragraph following Eq. (\@eq:hazard-discrete):

> This discrete-time hazard transform under a piecewise-constant hazard assumption is standard; see, e.g., Kalbfleisch and Prentice (*The Statistical Analysis of Failure Time Data*).

---

## E. NO-CHANGE CONFIRMATIONS (DO NOT MODIFY)

The following Kimi suggestions are **explicitly NOT adopted** and therefore require **no Cursor action**:

- Do **not** remove or replace the COVID/vaccine applications.
- Do **not** change the primary estimand from cumulative hazard ratio.
- Do **not** introduce causal language or counterfactual estimands.
- Do **not** replace least-squares fitting with likelihood-based frailty estimation.

---

## F. OPTIONAL (SAFE BUT NON-ESSENTIAL)

*(Mark as optional in Cursor; include only if polishing for Biostatistics / SIM.)*

- Cross-reference Table `joint_frailty_comparison` in §2.11 to explicitly support the claim of residual non-null behavior under shared-frailty Cox.

---

## DONE CRITERIA

After completing this punchlist:
- Bootstrap uncertainty is defensible against counting-process objections
- Numerical edge cases are reviewer-proof
- Identifiability limits are framed as structural, not heuristic
- KCOR is cleanly distinguished from Cox + frailty without over-claiming

**This completes the accepted Kimi feedback integration.**

